<div class="wrapper main-content-admin">
  <div class="header-home-admin">
  </div>
  <div class="body-admin">
    <!-- Datos iniciales de la vista de administrador -->
    <div class="row mt-5 mb-5">
      <div class="col-12">
        <span class="title-perfil">Bienvenido {{name_user}}</span>
        <br>
        <span class="title-perfil">Administrador</span>
      </div>
    </div>
    <!-- Comienza el contenido de administrador -->
    <div class="container">
      <!-- Título de la tabla de administradores -->
      <div class="row mt-3 mb-5" style="text-align: center;">
        <div class="col-12">
          <div class="alert alert-primary" role="alert">
            <span class="title-table">Lista de administradores registrados</span>
          </div>
        </div>
      </div>

      <!-- Campo de búsqueda -->
      <ng-container *ngIf="lista_admins.length > 0">
        <div class="row mb-3">
          <div class="col-12">
            <div class="search-container-bootstrap">
              <div class="input-group input-group-lg">
                <span class="input-group-text">
                  <i class="bi bi-search"></i>
                </span>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Buscar por clave, nombre, email, RFC u ocupación"
                  (keyup)="hacerFiltro($event)"
                  [(ngModel)]="buscadorPalabra">
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <!-- Tabla de administradores -->
      <ng-container *ngIf="lista_admins.length > 0; else noData">
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-primary">
              <tr>
                <th scope="col" class="sortable-header" (click)="ordenarPor('clave_admin')">
                  Clave Admin <i class="bi" [ngClass]="logoSorting('clave_admin')"></i>
                </th>
                <th scope="col" class="sortable-header" (click)="ordenarPor('nombre')">
                  Nombre <i class="bi" [ngClass]="logoSorting('nombre')"></i>
                </th>
                <th scope="col" class="sortable-header" (click)="ordenarPor('apellido')">
                  Apellido <i class="bi" [ngClass]="logoSorting('apellido')"></i>
                </th>
                <th scope="col" class="sortable-header" (click)="ordenarPor('email')">
                  Email <i class="bi" [ngClass]="logoSorting('email')"></i>
                </th>
                <th scope="col" class="sortable-header" (click)="ordenarPor('rfc')">
                  RFC <i class="bi" [ngClass]="logoSorting('rfc')"></i>
                </th>
                <th scope="col" class="sortable-header" (click)="ordenarPor('ocupacion')">
                  Ocupación <i class="bi" [ngClass]="logoSorting('ocupacion')"></i>
                </th>
                <th scope="col">Editar</th>
                <th scope="col">Eliminar</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let admin of lista_admins_paginada; let i=index">
                <td>{{admin.clave_admin}}</td>
                <td>{{admin.first_name}}</td>
                <td>{{admin.last_name}}</td>
                <td>{{admin.email}}</td>
                <td>{{admin.rfc}}</td>
                <td>{{admin.ocupacion}}</td>
                <td class="td-editar"><i class="bi bi-pencil-square" (click)="goEditar(admin.id)"></i></td>
                <td class="td-eliminar"><i class="bi bi-trash3-fill" (click)="delete(admin.id)"></i></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Información y controles de paginación -->
        <div class="row mt-3">
          <div class="col-md-6 d-flex align-items-center">
            <div class="pagination-info">
              <span>Mostrando {{(paginaDefault - 1) * paginaTamano + 1}} a {{Math.min(paginaDefault * paginaTamano, lista_admins_filtrada.length)}} de {{lista_admins_filtrada.length}} registros</span>
            </div>
          </div>
          <div class="col-md-6 d-flex justify-content-end align-items-center">
            <div class="page-size-selector me-3">
              <label class="me-2">Elementos por página:</label>
              <select class="form-select form-select-sm d-inline-block w-auto" (change)="cambiarPagina(+$any($event.target).value)">
                <option *ngFor="let size of paginaTamanoOptions" [value]="size" [selected]="size === paginaTamano">{{size}}</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Paginación -->
        <div class="row mt-2" *ngIf="totalPages > 1">
          <div class="col-12">
            <nav aria-label="Navegación de página">
              <ul class="pagination justify-content-center">
                <!-- Primera página -->
                <li class="page-item" [class.disabled]="paginaDefault === 1">
                  <a class="page-link" (click)="irAPagina(1)" [attr.aria-disabled]="paginaDefault === 1">
                    <i class="bi bi-chevron-double-left"></i>
                  </a>
                </li>

                <!-- Página anterior -->
                <li class="page-item" [class.disabled]="paginaDefault === 1">
                  <a class="page-link" (click)="irAPagina(paginaDefault - 1)" [attr.aria-disabled]="paginaDefault === 1">
                    <i class="bi bi-chevron-left"></i>
                  </a>
                </li>

                <!-- Números de página -->
                <li class="page-item" *ngFor="let page of getPaginasVisibles()" [class.active]="page === paginaDefault">
                  <a class="page-link" (click)="irAPagina(page)">{{page}}</a>
                </li>

                <!-- Página siguiente -->
                <li class="page-item" [class.disabled]="paginaDefault === totalPages">
                  <a class="page-link" (click)="irAPagina(paginaDefault + 1)" [attr.aria-disabled]="paginaDefault === totalPages">
                    <i class="bi bi-chevron-right"></i>
                  </a>
                </li>

                <!-- Última página -->
                <li class="page-item" [class.disabled]="paginaDefault === totalPages">
                  <a class="page-link" (click)="irAPagina(totalPages)" [attr.aria-disabled]="paginaDefault === totalPages">
                    <i class="bi bi-chevron-double-right"></i>
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>

      </ng-container>

      <!-- Esto se muestra cuando no hay datos -->
      <ng-template #noData>
        <div class="row">
          <div class="col-12">
            <div class="alert alert-warning" role="alert">
              No hay administradores registrados.
            </div>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
